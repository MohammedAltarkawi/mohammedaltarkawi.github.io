{"version":3,"file":"GenericStateModel-dbg.js","names":["GenericJSONModel","JSONModel","constructor","data","_setData","oData","bMerge","setData","_checkUpdate","_observeFunctions","getState","getContext","key","prototype","apply","arguments","allData","bHooked","Object","getOwnPropertyNames","getPrototypeOf","forEach","sAttr","sVal","funcBefore","funcCheckUpdate","bind","ret","bFirstCall","_len","length","args","Array","_key","checkUpdate"],"sources":["GenericStateModel.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-function-type */\r\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\r\n/* eslint-disable @typescript-eslint/no-unsafe-return */\r\n/* eslint-disable @typescript-eslint/no-unsafe-call */\r\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\r\n/* eslint-disable @typescript-eslint/no-unsafe-argument */\r\n/* eslint-disable @typescript-eslint/ban-ts-comment */\r\n/* eslint-disable prefer-rest-params */\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport Context from 'sap/ui/model/Context';\r\nimport JSONModel from 'sap/ui/model/json/JSONModel';\r\n\r\n/**\r\n * @namespace @namespace tvc.ui5.configurator\r\n */\r\nexport default class GenericJSONModel<T> extends JSONModel {\r\n    _testType: any;\r\n\r\n    constructor(data: T) {\r\n        super();\r\n        this._setData(data);\r\n    }\r\n\r\n    public _setData(oData: T, bMerge?: boolean): void {\r\n        this.setData(<any>oData, bMerge);\r\n\r\n        this._checkUpdate();\r\n        this._observeFunctions();\r\n    }\r\n\r\n    public getState(): T {\r\n        return (this as any).oData as T;\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    public getContext(key: string): Context {\r\n        //@ts-ignore\r\n        return JSONModel.prototype.getContext.apply(this, arguments);\r\n    }\r\n\r\n    private _observeFunctions() {\r\n        //small trick: we are calling a check update after every single function (instead of after every single attribute change)\r\n        //as we are 100% ensuring, that nobody is adjusting the values..\r\n        const allData = (this as any).oData as T;\r\n        let bHooked = false;\r\n\r\n        Object.getOwnPropertyNames(Object.getPrototypeOf((this as any).oData)).forEach(sAttr => {\r\n            const sVal = (<any>allData)[sAttr];\r\n            if (typeof sVal === 'function') {\r\n                const funcBefore: Function = sVal;\r\n                const funcCheckUpdate = this._checkUpdate.bind(this);\r\n                (<any>allData)[sAttr] = function (...args: any[]) {\r\n                    let ret: any = null;\r\n                    const bFirstCall = bHooked === false;\r\n                    bHooked = true;\r\n\r\n                    try {\r\n                        ret = funcBefore.apply(this, args);\r\n                    } finally {\r\n                        bHooked = bFirstCall === true ? false : true;\r\n                    }\r\n                    if (bFirstCall === true) {\r\n                        funcCheckUpdate();\r\n                    }\r\n                    return ret;\r\n                };\r\n            }\r\n        });\r\n    }\r\n\r\n    public _checkUpdate() {\r\n        (<any>this).checkUpdate(false, true);\r\n    }\r\n}\r\n"],"mappings":";;;;;EAYA;AACA;AACA;EACe,MAAMA,gBAAgB,SAAYC,SAAS,CAAC;IAGvDC,WAAWA,CAACC,IAAO,EAAE;MACjB,KAAK,CAAC,CAAC;MACP,IAAI,CAACC,QAAQ,CAACD,IAAI,CAAC;IACvB;IAEOC,QAAQA,CAACC,KAAQ,EAAEC,MAAgB,EAAQ;MAC9C,IAAI,CAACC,OAAO,CAAMF,KAAK,EAAEC,MAAM,CAAC;MAEhC,IAAI,CAACE,YAAY,CAAC,CAAC;MACnB,IAAI,CAACC,iBAAiB,CAAC,CAAC;IAC5B;IAEOC,QAAQA,CAAA,EAAM;MACjB,OAAQ,IAAI,CAASL,KAAK;IAC9B;;IAEA;IACOM,UAAUA,CAACC,GAAW,EAAW;MACpC;MACA,OAAOX,SAAS,CAACY,SAAS,CAACF,UAAU,CAACG,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAChE;IAEQN,iBAAiBA,CAAA,EAAG;MACxB;MACA;MACA,MAAMO,OAAO,GAAI,IAAI,CAASX,KAAU;MACxC,IAAIY,OAAO,GAAG,KAAK;MAEnBC,MAAM,CAACC,mBAAmB,CAACD,MAAM,CAACE,cAAc,CAAE,IAAI,CAASf,KAAK,CAAC,CAAC,CAACgB,OAAO,CAACC,KAAK,IAAI;QACpF,MAAMC,IAAI,GAASP,OAAO,CAAEM,KAAK,CAAC;QAClC,IAAI,OAAOC,IAAI,KAAK,UAAU,EAAE;UAC5B,MAAMC,UAAoB,GAAGD,IAAI;UACjC,MAAME,eAAe,GAAG,IAAI,CAACjB,YAAY,CAACkB,IAAI,CAAC,IAAI,CAAC;UAC9CV,OAAO,CAAEM,KAAK,CAAC,GAAG,YAA0B;YAC9C,IAAIK,GAAQ,GAAG,IAAI;YACnB,MAAMC,UAAU,GAAGX,OAAO,KAAK,KAAK;YACpCA,OAAO,GAAG,IAAI;YAEd,IAAI;cAAA,SAAAY,IAAA,GAAAd,SAAA,CAAAe,MAAA,EAL6BC,IAAI,OAAAC,KAAA,CAAAH,IAAA,GAAAI,IAAA,MAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA;gBAAJF,IAAI,CAAAE,IAAA,IAAAlB,SAAA,CAAAkB,IAAA;cAAA;cAMjCN,GAAG,GAAGH,UAAU,CAACV,KAAK,CAAC,IAAI,EAAEiB,IAAI,CAAC;YACtC,CAAC,SAAS;cACNd,OAAO,GAAGW,UAAU,KAAK,IAAI,GAAG,KAAK,GAAG,IAAI;YAChD;YACA,IAAIA,UAAU,KAAK,IAAI,EAAE;cACrBH,eAAe,CAAC,CAAC;YACrB;YACA,OAAOE,GAAG;UACd,CAAC;QACL;MACJ,CAAC,CAAC;IACN;IAEOnB,YAAYA,CAAA,EAAG;MACZ,IAAI,CAAE0B,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC;IACxC;EACJ;EAAC,OAAAlC,gBAAA;AAAA","ignoreList":[]}