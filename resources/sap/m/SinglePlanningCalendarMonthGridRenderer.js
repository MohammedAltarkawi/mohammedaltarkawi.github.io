/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/i18n/Formatting","sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/Theming","sap/ui/unified/calendar/CalendarDate","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/calendar/Month","sap/ui/core/IconPool","./PlanningCalendarLegend","sap/ui/core/InvisibleText","sap/ui/unified/library","sap/ui/core/date/UI5Date"],function(e,a,t,n,l,i,s,r,o,d,p,c){"use strict";var g=p.CalendarDayType;var f={apiVersion:2};f.render=function(e,a){var t=a._getCoreLocaleData();var n=a._getDensitySizes();e.openStart("div",a);e.class("sapMSinglePCGrid");e.class("sapMSPCMonthGrid");e.openEnd();this.renderDayNames(e,a,t);e.openStart("div");e.class("sapMSinglePCGridContent");e.openEnd();this.renderCells(e,a,t,n);e.close("div");e.close("div")};f.renderCells=function(e,a,t,n){var l=a._getCells(),i=a._getVerticalLabels(),s=a._getColumns(),r=[],o=[],d,p,c,g,f=[],v,u,D,S;for(D=0;D<a._getRows();D++){u=0;e.openStart("div");e.attr("role","grid");e.class("sapMSPCMonthWeek");e.openEnd();e.openStart("div");e.class("sapMSPCMonthWeekNumber");e.openEnd();e.text(i[D]);e.close("div");for(S=0;S<s;S++){d=D*s+S;p=l[d];c=a._getAppointmetsForADay(p);g=a._getPreviousAppointmetsForADay(p);f.push(g);v=a._aMoreCountPerDay[d];r.push(v);o.push(c);u=Math.max(u,a._aAppsLevelsPerDay[d].length)}e.openStart("div");e.class("sapMSPCMonthDays");e.class("sapMSPCMonthDaysMax"+u);e.attr("role","row");e.openEnd();for(S=0;S<s;S++){d=D*s+S;p=l[d];this.renderDay(e,a,p,t,r[d],d)}e.openStart("div");e.class("sapMSinglePCBlockers");e.class("sapUiCalendarRowVisFilled");e.attr("role","list");e.openEnd();for(S=0;S<s;S++){d=D*s+S;p=l[d];if(S===0){this.renderAppointments(e,a,f[d],S,r[d],n,D,p,l)}this.renderAppointments(e,a,o[d],S,r[d],n,D,p,l)}e.close("div");e.close("div");e.close("div")}};f.renderDay=function(e,a,n,i,r,d){var p=a._getSpecialDates(),g=s.prototype._getDateTypes.call(a,n),f=a._getDateFormatter(),v=n.isSame(l.fromLocalJSDate(c.getInstance())),u,D;e.openStart("div");e.class("sapMSPCMonthDay");if(a._checkDateSelected(n)){e.class("sapMSPCMonthDaySelected")}if(v){e.class("sapMSPCMonthDayToday")}e.attr("role","gridcell");if(a._isNonWorkingDay(n)){e.class("nonWorkingTimeframe")}if(p){if(g&&g[0]){u=g[0];e.class("sapUiCalendarSpecialDay"+u.type);D=o.findLegendItemForItem(t.getElementById(a._sLegendId),u)}}e.attr("sap-ui-date",n.valueOf().toString());e.attr("tabindex",-1);e.attr("aria-labelledby",f.format(n.toLocalJSDate())+"-Descr");e.openEnd();this.renderDndPlaceholder(e,a.getAggregation("_appsPlaceholders")[d]);if(v){e.openStart("div");e.class("sapMSPCMonthNowMarker");e.openEnd()}e.openStart("div");e.class("specialDateIndicator");e.openEnd();e.close("div");e.openStart("div");e.class("sapMSPCMonthDayNumber");e.openEnd();e.text(n.getDate());e.close("div");if(r){e.openStart("div");e.class("sapMSPCMonthLnkMore");e.openEnd();e.renderControl(a._getMoreLink(r,n,d));e.close("div")}e.openStart("span",f.format(n.toLocalJSDate())+"-Descr");e.class("sapUiInvisibleText");e.openEnd();e.text(a._getCellStartInfo(n.toLocalJSDate()));if(a._sLegendId&&D){e.text(D)}e.close("span");if(v){e.close("div")}e.close("div")};f.renderAppointments=function(e,a,t,n,l,i,s,r,o){var d=a._getMaxAppointments(),p=l?d-2:d-1,c=a._getColumns(),g,f,v;for(var u=0;u<t.length;u++){f=t[u];g=a._getRowEndIndex(o,o.indexOf(r),c);if(f.level<=p){v=f._nextDay>g;if(f._nextDay===undefined||v){continue}this.renderAppointment(e,a,f,n,i,s,r)}else if(f._overflows){f.level=f._nextDayLevel;if(f._nextDay&&f._nextDayLevel<a._getMaxAppointments()-1){this.renderAppointment(e,a,f,f._nextDay,i,s,r)}}}};f.renderAppointment=function(e,t,i,s,r,o,p){var f=i.data,v=i.width,u=i.level,D=t._getCells(),S=t._getColumns(),_=f.getTooltip_AsString(),y=f.getType(),C=f.getColor(),m=f.getTitle(),h=f.getText(),A=f.getIcon(),b=f.getId(),M=f.getStartDate(),I=f.getEndDate(),E=!I||t._isAllDayAppointment(M,I),x=E?d.getStaticId("sap.ui.unified","CALENDAR_ALL_DAY_PREFIX"):d.getStaticId("sap.ui.unified","APPOINTMENT"),P=f.getParent().getEnableAppointmentsDragAndDrop(),T=p&&p.isSame(l.fromLocalJSDate(c.getInstance())),L={role:"listitem",labelledby:{value:x,append:true},selected:null},U=S-s-v,w=a.getRTL(),N=n.getTheme(),k=t._findStartDateIndex(D,i,t._iStartDayOffset),O=i._nextDay>k,R=D[i._nextDay],W=t._getDateColumn(D,R,S),F=t._getDateRow(D,R,S),J=F===o,H,V,z,B,G;if(i._overflows||J){if(!i._partRendered){i._partRendered=true;O=i._nextDay>k;s=W;U=S-W+1-v;G=l.fromLocalJSDate(I);z=t._getDateColumn(D,G,S);if(U>0||B){U=S-z-1;if(z<s||B){U=0}}}}if(i._overflows){u=i.level}if(N.includes("horizon")){if(T){V=N.indexOf("_hc")?.4375:.0625}else{V=N.indexOf("_hc")?.1875:.0625}}else{if(T){V=N.indexOf("_hc")?.3125:.0625}else{V=N.indexOf("_hc")?.125:.0625}}U=U<0?0:U;if(m){L["labelledby"].value=L["labelledby"].value+" "+b+"-"+s+"_"+o+"-Title"}L["labelledby"].value=L["labelledby"].value+" "+b+"-"+s+"_"+o+"-Descr";if(h){L["labelledby"].value=L["labelledby"].value+" "+b+"-"+s+"_"+o+"-Text"}if(f.getTentative()){L["labelledby"].value=L["labelledby"].value+" "+d.getStaticId("sap.ui.unified","APPOINTMENT_TENTATIVE")}if(f.getSelected()){L["labelledby"].value=L["labelledby"].value+" "+d.getStaticId("sap.ui.unified","APPOINTMENT_SELECTED")}e.openStart("div",f.getId()+"-"+s+"_"+o);e.attr("draggable",P);e.attr("data-sap-ui-draggable",P);e.attr("data-sap-ui-related",f.getId());e.attr("data-sap-level",u);e.attr("data-sap-width",v);e.attr("tabindex",0);if(_){e.attr("title",_)}e.accessibilityState(f,L);e.class("sapMSinglePCAppointmentWrap");e.class("sapUiCalendarRowApps");if(!C&&y!==g.None){e.class("sapUiCalendarApp"+y)}if(C){if(a.getRTL()){e.style("border-right-color",C)}else{e.style("border-left-color",C)}}e.style(w?"right":"left","calc("+s*100/S+"% + "+V+"rem)");e.style(w?"left":"right","calc("+U*100/S+"% + "+V+"rem)");e.style("top",u*r.appHeight+r.cellHeaderHeight+"rem");e.openEnd();e.openStart("div");e.class("sapUiCalendarApp");if(f.getSelected()){e.class("sapUiCalendarAppSel")}if(f.getTentative()){e.class("sapUiCalendarAppTent")}if(A){e.class("sapUiCalendarAppWithIcon")}e.openEnd();e.openStart("div");e.class("sapUiCalendarAppCont");if(C){e.style("background-color",f._getCSSColorForBackground(C))}e.openEnd();if(i.hasPrevious<0||i._overflows||O){H=["sapUiCalendarAppArrowIconLeft","sapUiCalendarAppArrowIcon"];e.icon("sap-icon://arrow-left",H,{title:null,role:"img"})}if(A){H=["sapUiCalendarAppIcon"];var X={};X["id"]=b+"-Icon";X["title"]=null;X["role"]="img";e.icon(A,H,X)}if(m){e.openStart("span",b+"-"+s+"_"+o+"-Title");e.class("sapUiCalendarAppTitle");e.openEnd();e.text(m,true);e.close("span")}if(i.hasNext<0){H=["sapUiCalendarAppArrowIconRight","sapUiCalendarAppArrowIcon"];e.icon("sap-icon://arrow-right",H,{title:null,role:"img"})}e.openStart("span",b+"-"+s+"_"+o+"-Descr");e.class("sapUiInvisibleText");e.openEnd();e.text(t._getAppointmentAnnouncementInfo(f));e.close("span");e.close("div");e.close("div");e.close("div")};f.renderDayNames=function(a,t,n){var s=t._getFirstDayOfWeek(),r=t.getId(),o,d=e.getCalendarType(),p=n.getDaysStandAlone("abbreviated",d),g=n.getDaysStandAlone("wide",d),f=c.getInstance(t.getStartDate()),v,u;f.setDate(f.getDate()-f.getDay()+s);v=l.fromLocalJSDate(f);a.openStart("div",r+"-Names");a.class("sapMSPCMonthDayNames");a.openEnd();for(var D=0;D<7;D++){u=(D+s)%7;o=r+"-WH"+u;a.openStart("div",o);a.class("sapUiCalWH");if(D===0){a.class("sapUiCalFirstWDay")}if(i._isWeekend(v,n)){a.class("sapUiCalItemWeekEnd")}v.setDate(v.getDate()+1);a.accessibilityState(null,{role:"columnheader",label:g[u]});a.openEnd();a.text(p[u%7]);a.close("div")}a.close("div")};f.renderDndPlaceholder=function(e,a){e.openStart("div");e.class("sapMSinglePCOverlay");e.openEnd();e.renderControl(a);e.close("div")};return f},true);
//# sourceMappingURL=SinglePlanningCalendarMonthGridRenderer.js.map