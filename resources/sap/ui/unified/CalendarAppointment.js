/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./DateTypeRange","sap/base/i18n/Formatting","sap/ui/core/Lib","sap/ui/core/Locale","sap/ui/core/format/DateFormat","sap/ui/core/format/NumberFormat","sap/ui/core/format/TimezoneUtil","sap/ui/core/Core","./calendar/CalendarUtils","./library","sap/base/Log","sap/ui/core/date/UI5Date"],function(e,t,a,n,i,r,o,g,u,s,p,l){"use strict";var m=e.extend("sap.ui.unified.CalendarAppointment",{metadata:{library:"sap.ui.unified",properties:{title:{type:"string",group:"Data"},text:{type:"string",group:"Data"},description:{type:"string",group:"Data"},icon:{type:"sap.ui.core.URI",group:"Data",defaultValue:null},tentative:{type:"boolean",group:"Data",defaultValue:false},selected:{type:"boolean",group:"Data",defaultValue:false},key:{type:"string",group:"Data",defaultValue:null},color:{type:"sap.ui.core.CSSColor",group:"Appearance",defaultValue:null}},aggregations:{customContent:{type:"sap.ui.core.Control",multiple:true}}}});m.prototype.init=function(){this._sAppointmentPartSuffix=null};m.prototype.applyFocusInfo=function(e){var t=this.getParent();if(t){t.applyFocusInfo(e)}return this};m.prototype._getDateRangeIntersectionText=function(e){var o=this.getStartDate(),g=this.getEndDate()?this.getEndDate():l.getInstance(864e12),u,s,p=l.getInstance(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),m=l.getInstance(p.getFullYear(),p.getMonth(),p.getDate()+1),f=i.getTimeInstance({pattern:"HH:mm"}),c=a.getResourceBundleFor("sap.m"),d=r.getUnitInstance({allowedUnits:["duration-hour"]},new n(t.getLanguageTag())),T=r.getUnitInstance({allowedUnits:["duration-minute"]},new n(t.getLanguageTag())),h,A,D,I;if(o.getTime()>m.getTime()||g.getTime()<p.getTime()){u=""}else if(o.getTime()<=p.getTime()&&g.getTime()>=m.getTime()){u=c.getText("PLANNINGCALENDAR_ALLDAY")}else if(o.getTime()<p.getTime()){u=c.getText("PLANNINGCALENDAR_UNTIL");s=f.format(g)}else if(g.getTime()>m.getTime()){u=c.getText("PLANNINGCALENDAR_FROM");s=f.format(o)}else{u=f.format(o);if(g.getTime()-o.getTime()<36e5){A=(g.getTime()-o.getTime())/6e4;s=T.format(A,"duration-minute")}else if((g.getTime()-o.getTime())%36e5===0){h=(g.getTime()-o.getTime())/36e5;s=d.format(h,"duration-hour")}else{h=Math.floor((g.getTime()-o.getTime())/36e5);D=d.format(h,"duration-hour");A=(g.getTime()-o.getTime())/6e4%60;I=T.format(A,"duration-minute");s=c.getText("PLANNINGCALENDAR_APP_DURATION",[D,I])}}return{start:u,end:s}};m._getComparer=function(e){var t=24*60*60*1e3,a=l.getInstance(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime(),n=a+t;return function(e,t){var i=e.appointment.getStartDate().getTime(),r=t.appointment.getStartDate().getTime(),o=e.appointment.getEndDate()?e.appointment.getEndDate().getTime():864e12,g=t.appointment.getEndDate()?t.appointment.getEndDate().getTime():864e12,u=i<=a&&o>=n,s=r<=a&&g>=n,p;if(u&&s||!u&&!s){p=i-r;if(p===0){p=g-o}}else if(u){p=-1}else{p=1}return p}};m.prototype.setColor=function(e){if(e&&!e.match(/^#[0-9a-f]{6}$/i)){p.warning("setColor accepts only full hex color value with pound symbol, but value is '"+e+"'")}return this.setProperty("color",e)};m.prototype._getCSSColorForBackground=function(e){if(e.length===4){e="#"+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)+e.charAt(3)+e.charAt(3)}return"rgba("+[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)].join(", ")+", 0.2)"};m.prototype._setAppointmentPartSuffix=function(e){this._sAppointmentPartSuffix=e;return this};m.prototype.getDomRef=function(e){if(document.getElementById(this.getId())){return document.getElementById(e?this.getId()+"-"+e:this.getId())}else if(this._sAppointmentPartSuffix){return document.getElementById(e?this.getId()+"-"+this._sAppointmentPartSuffix+"-"+e:this.getId()+"-"+this._sAppointmentPartSuffix)}var t=document.querySelectorAll(".sapUiCalendarRowApps[id^='"+this.getId()+"-']");return t.length>0?t[0]:null};return m});
//# sourceMappingURL=CalendarAppointment.js.map